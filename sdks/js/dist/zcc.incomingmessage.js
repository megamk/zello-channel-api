!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.IncomingMessage=t():(e.ZCC=e.ZCC||{},e.ZCC.IncomingMessage=t())}(window,function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t,n){"use strict";e.exports={ERROR_NOT_ENOUGH_PARAMS:"Not enough parameters",ERROR_INVALID_SERVER_PROTOCOL:"Invalid server protocol, use ws:// or wss://",ERROR_UNSUPPORTED:"Your browser does not support all required APIs.\nRead more here https://github.com/zelloptt/zello-channel-api",ERROR_RECORDING_NO_HTTPS:"Recording will work over https:// loaded pages only",ERROR_WIDGET_ELEMENT_NOT_FOUND:"DOM element for widget is not found",ERROR_INVALID_DECODER:"Invalid incoming message decoder. Should be a function that creates and returns decoder instance.",ERROR_INVALID_PLAYER:"Invalid incoming message decoder. Should be a function that creates and returns player instance.",EVENT_ERROR:"error",EVENT_CONNECT:"connect",EVENT_CLOSE:"close",EVENT_LOGON:"logon",EVENT_STATUS:"status",EVENT_BUTTON_PRESS:"button_press",EVENT_START_STREAM:"start_stream",EVENT_STOP_STREAM:"stop_stream",EVENT_SESSION_START_CONNECT:"session_start_connect",EVENT_SESSION_CONNECT:"session_connect",EVENT_SESSION_FAIL_CONNECT:"session_fail_connect",EVENT_SESSION_CONNECTION_LOST:"session_connection_lost",EVENT_SESSION_DISCONNECT:"session_disconnect",EVENT_INCOMING_VOICE_WILL_START:"incoming_voice_will_start",EVENT_INCOMING_VOICE_DID_START:"incoming_voice_did_start",EVENT_INCOMING_VOICE_DID_STOP:"incoming_voice_did_stop",EVENT_INCOMING_VOICE_DATA:"incoming_voice_data",EVENT_INCOMING_VOICE_DATA_DECODED:"incoming_voice_data_decoded"}},function(e,t,n){"use strict";e.exports={libraryName:"ZCC"}},function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,null,[{key:"getLoadedLibrary",value:function(){return!!window&&window[r.libraryName]}},{key:"strToCamelCase",value:function(e){return e.split(/[-_]/).map(function(e,t){return 0===t?e.toLowerCase():e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}).join("")}}]),e}();e.exports=i},function(e,t,n){function o(e){if(e)return function(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}(e)}e.exports=o,o.prototype.on=o.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},o.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},o.prototype.off=o.prototype.removeListener=o.prototype.removeAllListeners=o.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,o=this._callbacks["$"+e];if(!o)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r=0;r<o.length;r++)if((n=o[r])===t||n.fn===t){o.splice(r,1);break}return this},o.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var o=0,r=(n=n.slice(0)).length;o<r;++o)n[o].apply(this,t);return this},o.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},o.prototype.hasListeners=function(e){return!!this.listeners(e).length}},,,,,,,,function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(3),i=n(0),s=n(2),c=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.messageDidStart=!1,o.options=Object.assign({incomingMessageDecoder:function(){return new(s.getLoadedLibrary().Decoder)({channels:1,fallback:!0})},incomingMessagePlayer:function(e){var t=e.getSampleRate();return new(s.getLoadedLibrary().Player)({encoding:"32bitFloat",channels:1,sampleRate:t,flushingTime:100})}},n.options,{messageData:e}),o.initDecoder(),o.initPlayer(),o.session=n,o.session.on(i.EVENT_INCOMING_VOICE_DATA,function(e){o.messageDidStart||(o.messageDidStart=!0,o.emit(i.EVENT_INCOMING_VOICE_DID_START,e),o.session.emit(i.EVENT_INCOMING_VOICE_DID_START,o)),o.emit(i.EVENT_INCOMING_VOICE_DATA,e),o.decode(e)}),o.session.on(i.EVENT_INCOMING_VOICE_DID_STOP,function(){o.emit(i.EVENT_INCOMING_VOICE_DID_STOP,o)}),o.on(i.EVENT_INCOMING_VOICE_DATA_DECODED,function(e){o.player.feed(e)}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r),o(t,[{key:"decode",value:function(e){this.decoder.decode(e.messageData)}},{key:"initDecoder",value:function(){var e=this;if("function"!=typeof this.options.incomingMessageDecoder)throw new Error(i.ERROR_INVALID_DECODER);if(this.decoder=this.options.incomingMessageDecoder(),void 0===this.decoder||"function"!=typeof this.decoder.decode||"function"!=typeof this.decoder.getSampleRate||"function"!=typeof this.decoder.on)throw new Error(i.ERROR_INVALID_DECODER);this.decoder.on("decode",function(t){e.emit(i.EVENT_INCOMING_VOICE_DATA_DECODED,t)})}},{key:"initPlayer",value:function(){if("function"!=typeof this.options.incomingMessagePlayer)throw new Error(i.ERROR_INVALID_PLAYER);if(this.player=this.options.incomingMessagePlayer(this.decoder),void 0===this.player||"function"!=typeof this.player.feed)throw new Error(i.ERROR_INVALID_PLAYER)}}]),t}();e.exports=c}])});